<div class="main-container" fxLayout="column" fxLayoutAlign="space-between center">

  <div fxLayout="column wrap" fxFlex="40" fxFlex.lt-lg="50" fxFlex.lt-sm="80" fxLayoutAlign="center center"
    class="mat-elevation-z4 form-container">
    <h2>Library Card Search</h2>
    <form [formGroup]="searchForm" (ngSubmit)="onSubmit()">
      <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">
        <mat-form-field fxFlex>
          <span matPrefix>
            <mat-icon>card_membership</mat-icon>&nbsp;
          </span>
          <input matInput type="text" placeholder="Card Number" formControlName="cardNumber" required />
          <mat-error *ngFor="let validation of validationMessages.cardNumber">
            <mat-error *ngIf="
                searchForm.get('cardNumber').hasError(validation.type) &&
                    (searchForm.get('cardNumber').dirty || searchForm.get('cardNumber').touched)">
              {{ validation.message }}
            </mat-error>
          </mat-error>
        </mat-form-field>
        <a mat-button color="primary" (click)="openCardDialog()" class="create-button">Add New</a>
      </div>
      <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">
        <div fxLayoutAlign="space-between center" class="button-row" fxFlex>
          <a mat-button color="primary" [routerLink]="['/library-card/advanced-search']">Advanced Search</a>
          <a mat-button color="primary" [routerLink]="['/library-card/cards']">Full List</a>
          <button mat-raised-button color="primary" type="submit"
            [disabled]="searchForm.pristine || !searchForm.valid">Submit</button>
        </div>
      </div>
    </form>
  </div>

  <div class="main-container" fxLayout="row wrap" fxLayoutAlign="center center" *ngIf="card !== undefined">
    <mat-accordion fxFlex="500px" fxFlex.xs="100%">
      <mat-expansion-panel>
        <mat-expansion-panel-header fxLayoutAlign="center center">
          <mat-panel-title>
            <img mat-card-avatar src="{{card.photoUrl || '../../../assets/img/book.jpg'}}" alt="..."> &nbsp;
            {{card?.firstName}}, {{card?.lastName}}
          </mat-panel-title>
          <mat-panel-description>
            {{card?.email}}
          </mat-panel-description>
        </mat-expansion-panel-header>

        <div fxLayout="row wrap" fxLayoutAlign="center start">
          <div fxFlex="35%" class="text-color"><strong>Phone Number:</strong> &nbsp; {{card?.phoneNumber}}</div>
          <!-- <div fxFlex class="text-color"><strong>Address:</strong> &nbsp; <address>{{card?.address?.street}},
              {{card..city}}, {{card?.state}} {{card.address?.zipcode}}</address>
          </div> -->
          <div class="text-color"><strong>Address:</strong>
            <address>{{card.address.street}}, {{card.address.city}}, {{card.address.state.name}},
              {{card.address.zipcode}}</address>
          </div>
          <button mat-icon-button matTooltip="Details" color="primary" [routerLink]="['/library-card/cards/', card.id]">
            <mat-icon class="mat-18">reorder</mat-icon>
          </button>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
